---

---

<button
  id="showFormBtn"
  title="contacter moi"
  class="fixed bottom-6 right-6 z-50 inline-flex items-center justify-center rounded-2xl hover:bg-primary/20 transition-all duration-300 text-white p-3 shadow-xl bg-primary/20"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    class="text-[#FF3F6DD8]"
    width="40"
    height="40"
    viewBox="0 0 48 48"
    ><defs
      ><mask id="ipTMessage0"
        ><g
          fill="none"
          stroke="#fff"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="4"
          ><path
            fill="#555555"
            d="M44 24c0 11.046-8.954 20-20 20H4V24C4 12.954 12.954 4 24 4s20 8.954 20 20"
          ></path><path d="M14 18h18m-18 8h18m-18 8h10"></path></g
        ></mask
      ></defs
    ><path fill="currentColor" d="M0 0h48v48H0z" mask="url(#ipTMessage0)"
    ></path></svg
  >
</button>
<div id="formContainerWrapper" class="hidden fixed inset-0 z-[30px]">
  <div
    id="formContainer"
    class="absolute bottom-24 right-8 bg-base-300 p-4 rounded-[4px] shadow-sm shadow-[#FF3F6DD8] w-80"
  >
    <form
      id="contactForm"
      action="https://formspree.io/f/xxx"
      method="POST"
      class="flex flex-col gap-3"
    >
      <input
        name="name"
        type="text"
        required
        placeholder="Nom"
        class="border p-2 rounded"
      />
      <input
        name="email"
        type="email"
        required
        placeholder="Email"
        class="border p-2 rounded"
      />
      <textarea
        name="message"
        value=""
        onchange=""
        required
        placeholder="Votre message..."
        class="border p-2 rounded"></textarea>
      <button
        type="submit"
        class="btn btn-md border-none shadow-[#FF3F6DD8] shadow-sm text-[#FF3F6DD8] px-4 py-2 rounded-md hover:bg-green-700 mx-[5%]"
        >Envoyer</button
      >
    </form>

    <p id="successMessage" class="hidden text-green-600 mt-2">
      ✅ Message envoyé avec succès !
    </p>
    <p id="errorMessage" class="hidden text-red-600 mt-2">
      ❌ Une erreur est survenue.
    </p>
  </div>
</div>


<!-- Script JS dans un <script is:inline> pour Astro -->
	<script is:inline type="module">
		const showFormBtn = document.getElementById("showFormBtn");
		const formWrapper = document.getElementById("formContainerWrapper");
		const formContainer = document.getElementById("formContainer");
		const form = document.getElementById("contactForm");
		const success = document.getElementById("successMessage");
		const error = document.getElementById("errorMessage");
	  
		showFormBtn.addEventListener("click", () => {
		  formWrapper.classList.remove("hidden");
		  success.classList.add('hidden');
		  error.classList.add('hidden');
		  console.log(formWrapper.classList+"afficher")
		});
	  
		// Fermer si on clique dehors
		document.addEventListener("click", (e) => {
		  const isClickInside = formContainer.contains(e.target) || showFormBtn.contains(e.target);
		  if (!isClickInside) {
			formWrapper.classList.add("hidden");
		  }
		});
	  
		// Soumission du formulaire
		form.addEventListener("submit", async (e) => {
		  e.preventDefault();
		  success.classList.add('hidden');
		  error.classList.add('hidden');
	  
		  const data = new FormData(form);
		  const res = await fetch(form.action, {
			method: "POST",
			body: data,
			headers: { Accept: "application/json" }
		  });
	  
		  if (res.ok) {
			form.reset();
			success.classList.remove('hidden');
		  } else {
			error.classList.remove('hidden');
		  }
		});
	  </script>